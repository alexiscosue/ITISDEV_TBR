<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <script src="https://unpkg.com/scrollreveal"></script>
    <link rel="icon" type="image/png" href="assets/logo.png">
    <title>Login</title>
  </head>
  <body>
    <nav>
      <div class="nav__logo">
        <img src="assets/logo.png" alt="logo" />
        <span>Breathing Room PH</span>
      </div>
      <ul class="nav__links">
        <li class="link"><a href="index.html">Home</a></li>
        <li class="link"><a href="classes.html">Classes</a></li>
        <li class="link"><a href="membership.html">Membership</a></li>
        <li class="link"><a href="index.html#stories">About</a></li>
        <li class="link"><a href="index.html#posts">Blog</a></li>
        <li class="link"><a href="#contact">Contact</a></li>
      </ul>
      <div class="nav__profile">
        <a id="profileLink">
          <i class="ri-user-line"></i>
        </a>
        <script>
          fetch('/check-auth')
            .then(res => res.json())
            .then(data => {
              const link = document.getElementById('profileLink');
              if (data.loggedIn) {
                link.href = '/user_profile';
              } else {
                link.href = '/login.html';
              }
            });
        </script>
      </div>
    </nav>   
    <section class="login__section">
        <div class="section__container header__container">
            <div class="header__content">
              <h1>Login</h1>
              <h2>Your journey to Self begins here.</h2>
              <form action="/login" method="POST" class="login__form">
                <div class="input__group">
                  <label for="email">Email Address</label>
                  <input type="email" id="email" name="email" required />
                  <!-- Error message for email if there's an issue -->
                  
                </div>
                <div class="input__group">
                  <label for="password">Password</label>
                  <div class="password-wrapper">
                    <input type="password" id="password" name="password" required />
                    <div id="password-error" class="error-bubble" style="display:none;"></div>
                  </div>
                </div>
                <div class="error-bubble" id="email-error" style="display:none;"></div>     
                <button type="submit" class="btn">Login</button>
                <p class="register__link">Don't have an account? <a href="register.html">Sign up</a></p>
              </form>
            </div>
            <div class="why__image">
              <img src="assets/header.jpg" alt="header" />
            </div>
          </div>
      </section>

      <script>
        // Display error message for login failure
        const urlParams = new URLSearchParams(window.location.search);
        const errorMessage = urlParams.get('error');
        
        if (errorMessage) {
          const errorDiv = document.getElementById('email-error');
          errorDiv.textContent = errorMessage; // Display error message
          errorDiv.style.display = 'block'; // Make it visible
        }
      </script>
    </body>
</html>
